<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=color-scheme content="light dark"><meta name=author content="David Sass"><meta name=description content="Steps to install Azure CLI on Pengwin inside WSL2"><meta name=keywords content="blog,developer,architect,sassdawe"><meta name=twitter:card content="summary"><meta name=twitter:title content="Install Azure CLI on Pengwin inside WSL2"><meta name=twitter:description content="Steps to install Azure CLI on Pengwin inside WSL2"><meta property="og:title" content="Install Azure CLI on Pengwin inside WSL2"><meta property="og:description" content="Steps to install Azure CLI on Pengwin inside WSL2"><meta property="og:type" content="article"><meta property="og:url" content="http://kolislab.com/post/install-azure-cli-on-pengwin-inside-wsl2/"><meta property="article:section" content="post"><meta property="article:published_time" content="2020-04-29T06:32:36+00:00"><meta property="article:modified_time" content="2020-04-29T06:32:36+00:00"><title>Install Azure CLI on Pengwin inside WSL2 ¬∑ kolislab</title><link rel=canonical href=http://kolislab.com/post/install-azure-cli-on-pengwin-inside-wsl2/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.d9fddbffe6f27e69985dc5fe0471cdb0e57fbf4775714bc3d847accb08f4a1f6.css integrity="sha256-2f3b/+byfmmYXcX+BHHNsOV/v0d1cUvD2Eesywj0ofY=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.002ee2378e14c7a68f1f0a53d9694ed252090987c4e768023fac694a4fc5f793.css integrity="sha256-AC7iN44Ux6aPHwpT2WlO0lIJCYfE52gCP6xpSk/F95M=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/img/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/img/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><meta name=generator content="Hugo 0.104.2"><script type=text/javascript>!function(e,t,n){var s,o=e.location,f="script",m="instrumentationKey",a="ingestionendpoint",d="disableExceptionTracking",l="ai.device.",c="toLowerCase",r="crossOrigin",u="POST",h="appInsightsSDK",i=n.name||"appInsights";(n.name||e[h])&&(e[h]=i),s=e[i]||function(s){var p,g,v,j,C,k=!1,b=!1,i={initialize:!0,queue:[],sv:"5",version:2,config:s};function y(e,t){var n={},s="Browser";return n[l+"id"]=s[c](),n[l+"type"]=s,n["ai.operation.name"]=o&&o.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(i.sv||i.version),{time:function(){var e=new Date;function t(e){var t=""+e;return 1===t.length&&(t="0"+t),t}return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}if(g=s.url||n.src,g){function E(){var r,l,d,h,f,p,v,j,_,w,O;k=!0,i.queue=[],b||(b=!0,l=g,h=function(){var t,n,o,i,r,e={},l=s.connectionString;if(l)for(o=l.split(";"),t=0;t<o.length;t++)n=o[t].split("="),2===n.length&&(e[n[0][c]()]=n[1]);return e[a]||(i=e.endpointsuffix,r=i?e.location:null,e[a]="https://"+(r?r+".":"")+"dc."+(i||"services.visualstudio.com")),e}(),f=h[m]||s[m]||"",p=h[a],r=p?p+"/v2/track":s.endpointUrl,(v=[]).push((d="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",j=l,_=r,(O=(w=y(f,"Exception")).data).baseType="ExceptionData",O.baseData.exceptions=[{typeName:"SDKLoadFailed",message:d.replace(/\./g,"-"),hasFullStack:!1,stack:d+`
Snippet failed to load [`+j+`] -- Telemetry is disabled
Help Link: https://go.microsoft.com/fwlink/?linkid=2128109
Host: `+(o&&o.pathname||"_unknown_")+`
Endpoint: `+_,parsedStack:[]}],w)),v.push(function(e,t,n,s){var o,i=y(f,"Message"),a=i.data;return a.baseType="MessageData",o=a.baseData,o.message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/"/g,"")+'"',o.properties={endpoint:s},i}(0,0,l,r)),function(t,s){if(JSON){var o,i=e.fetch;i&&!n.useXhr?i(s,{method:u,body:JSON.stringify(t),mode:"cors"}):XMLHttpRequest&&(o=new XMLHttpRequest,o.open(u,s),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(t)))}}(v,r))}function w(e,t){b||setTimeout(function(){!t&&i.core||E()},500)}v=function(){var s,e=t.createElement(f);return e.src=g,s=n[r],!s&&""!==s||"undefined"==e[r]||(e[r]=s),e.onload=w,e.onerror=E,e.onreadystatechange=function(t,n){"loaded"!==e.readyState&&"complete"!==e.readyState||w(0,n)},e}(),n.ld<0?t.getElementsByTagName("head")[0].appendChild(v):setTimeout(function(){t.getElementsByTagName(f)[0].parentNode.appendChild(v)},n.ld||0)}try{i.cookie=t.cookie}catch{}function _(e){for(;e.length;)!function(e){i[e]=function(){var t=arguments;k||i.queue.push(function(){i[e].apply(i,t)})}}(e.pop())}var h="track",O="TrackPage",x="TrackEvent";return _([h+"Event",h+"PageView",h+"Exception",h+"Trace",h+"DependencyData",h+"Metric",h+"PageViewPerformance","start"+O,"stop"+O,"start"+x,"stop"+x,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),i.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4},C=(s.extensionConfig||{}).ApplicationInsightsAnalytics||{},!0!==s[d]&&!0!==C[d]&&(p="onerror",_(["_"+p]),j=e[p],e[p]=function(e,t,n,s,o){var a=j&&j(e,t,n,s,o);return!0!==a&&i["_"+p]({message:e,url:t,lineNumber:n,columnNumber:s,error:o}),a},s.autoExceptionInstrumented=!0),i}(n.cfg);function p(){n.onInit&&n.onInit(s)}(e[i]=s).queue&&0===s.queue.length?(s.queue.push(p),s.trackPageView({})):p()}(window,document,{src:"https://js.monitor.azure.com/scripts/b/ai.2.min.js",crossOrigin:"anonymous",cfg:{instrumentationKey:"9497aefd-77f5-4cb8-9d7e-f612e42e55d2"}})</script></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>kolislab</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/post/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/post/about>About</a></li><li class=navigation-item><a class=navigation-link href=http://www.buymeacoffee.com/sassdawe>By me a coffee</a></li></ul></section></nav><div class=content><section class="container page"><article><header><h1 class=title><a class=title-link href=http://kolislab.com/post/install-azure-cli-on-pengwin-inside-wsl2/>Install Azure CLI on Pengwin inside WSL2</a></h1></header><p>To be honest, I didn&rsquo;t expect that I&rsquo;ll have to write this post when I started on my quest to get Azure CLI working in Pengwin. But here I&rsquo;m sharing what I&rsquo;ve learned. <strong>#SharingIsCaring</strong></p><h1 id=things-that-didnt-work-i-expected>Things that didn&rsquo;t work I expected
<a class=heading-link href=#things-that-didnt-work-i-expected><i class="fa fa-link" aria-hidden=true></i></a></h1><p>So I went to the <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest">Install the Azure CLI</a> [] page as anyone else would do, and had a look at the options, I knew that Pengwin is built on top of Debian, so I started with the first option: <em>Install with apt&mldr;</em></p><figure><img src=/images/2020/04/image.png></figure><h2 id=first-try-install-with-apt>First try: Install with apt
<a class=heading-link href=#first-try-install-with-apt><i class="fa fa-link" aria-hidden=true></i></a></h2><p>The instructions on the <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli-apt?view=azure-cli-latest">page</a> were clear: <code>curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash</code> easy as that, but the result was not what I expected:</p><figure><img src=/images/2020/04/image-2.png alt="Failed to install with official script"><figcaption><p>Failed to install with official script</p></figcaption></figure><h2 id=second-try-manual-install-instructions>Second try: Manual install instructions
<a class=heading-link href=#second-try-manual-install-instructions><i class="fa fa-link" aria-hidden=true></i></a></h2><p>I was still on the <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli-apt?view=azure-cli-latest">Install Azure CLI with apt</a> page, but scrolled down to the manual instructions.</p><figure><img src=/images/2020/04/image-6.png></figure><p>And they worked, they really did, but <strong>I ended up with a really old version</strong> and I need the latest.</p><h2 id=third-try-go-back-to-the-first-option>Third try: Go back to the first option
<a class=heading-link href=#third-try-go-back-to-the-first-option><i class="fa fa-link" aria-hidden=true></i></a></h2><p>I tried executing <code>curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash</code> again, but the result or really the error what I got stayed the same.</p><p>I knew I had to break out of this evil recursion, it didn&rsquo;t matter anymore if I wasn&rsquo;t able to install it on my own.</p><h1 id=the-solution-twitter-and-help-from-nice-folks>The solution: Twitter and help from nice folks
<a class=heading-link href=#the-solution-twitter-and-help-from-nice-folks><i class="fa fa-link" aria-hidden=true></i></a></h1><p>It was clear to me that alone I&rsquo;ll never figure this one out, I&rsquo;m just too deep into Windows, but smart people know their limits so I went to Twitter and started tweeting about my failures. Some might say I started to complain, which might be true, I&rsquo;m human :)</p><p><a href=https://twitter.com/AzureSupport>@AzureSupport</a> was there for me, and later this nice guy <a href=https://twitter.com/bureado>JMP</a> (@bureado) [] joined the conversation and explained the error message to me - a much needed help I must say üôè - and suggested to try to install from the <a href=https://packages.microsoft.com/repos/azure-cli/pool/main/a/azure-cli/>binary package</a>:</p><figure><img src=/images/2020/04/image-4.png alt="https://twitter.com/bureado/status/1254439777778032640?s=20"><figcaption><p><a href="https://twitter.com/bureado/status/1254439777778032640?s=20">https://twitter.com/bureado/status/1254439777778032640?s=20</a></p></figcaption></figure><p>I already had an older version installed - <em>I don&rsquo;t know if this counts as an update or not, or if going straight to the binary would have worked without the older version or not&mldr;</em> - so I just downloaded the matching file of my Pengwin version <code>azure-cli_2.4.0-1~buster_all.deb</code> and installed it using <code>dpkg</code> strait from the downloads folder of my Windows user - remember, I&rsquo;m using Pengwin in WSL2.</p><p>And it worked!</p><figure><img src=/images/2020/04/image-5.png alt="Azure CLI installing from binary package"><figcaption><p>Azure CLI installing from binary package</p></figcaption></figure><p>JMP, thanks again for your help!</p></article></section></div><footer class=footer><section class=container>¬©
2019 -
2022
David Sass
¬∑
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.9cf2dbf9b6989ef8eae941ffb4231c26d1dc026bca38f1d19fdba50177d8a9ac.js integrity="sha256-nPLb+baYnvjq6UH/tCMcJtHcAmvKOPHRn9ulAXfYqaw="></script></body></html>